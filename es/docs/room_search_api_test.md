# æˆ¿é—´æœç´¢APIæµ‹è¯•æ–‡æ¡£

## å¿«é€Ÿå¼€å§‹

### 1. å¯¼å…¥ç¤ºä¾‹æ•°æ®
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x src/main/resources/scripts/import_room_data.sh

# æ‰§è¡Œå¯¼å…¥ï¼ˆç¡®ä¿Elasticsearchå·²å¯åŠ¨ï¼‰
./src/main/resources/scripts/import_room_data.sh localhost 9200
```

### 2. åŸºç¡€æµ‹è¯•
```bash
# æ£€æŸ¥æ•°æ®æ˜¯å¦å¯¼å…¥æˆåŠŸ
curl "http://localhost:9200/room_index/_count"
```

## APIæµ‹è¯•ç”¨ä¾‹

### ğŸ” æ™ºèƒ½ç»¼åˆæœç´¢

#### æµ‹è¯•1: æœç´¢"æŠ€æœ¯"ç›¸å…³æˆ¿é—´
```bash
GET /api/room/search/intelligent?keyword=æŠ€æœ¯&page=0&size=5
```
**é¢„æœŸç»“æœ**: è¿”å›åŒ…å«"æŠ€æœ¯äº¤æµç¾¤"ã€"å‰ç«¯å¼€å‘äº¤æµ"ã€"Javaåç«¯å¼€å‘"ç­‰æŠ€æœ¯ç›¸å…³æˆ¿é—´

#### æµ‹è¯•2: æœç´¢"Python"
```bash
GET /api/room/search/intelligent?keyword=Python&page=0&size=10
```
**é¢„æœŸç»“æœ**: è¿”å›"Pythonç¼–ç¨‹å­¦ä¹ "ã€"æ•°æ®ç§‘å­¦ç ”ç©¶"ç­‰ç›¸å…³æˆ¿é—´ï¼Œæ”¯æŒé«˜äº®æ˜¾ç¤º

#### æµ‹è¯•3: æœç´¢æˆ¿é—´ID
```bash
GET /api/room/search/intelligent?keyword=1&page=0&size=5
```
**é¢„æœŸç»“æœ**: ä¼˜å…ˆè¿”å›IDä¸º1çš„"æŠ€æœ¯äº¤æµç¾¤"

### ğŸ“› æˆ¿é—´åç§°æœç´¢

#### æµ‹è¯•4: ç²¾ç¡®åç§°æœç´¢
```bash
GET /api/room/search/name?roomName=æ¸¸æˆçˆ±å¥½è€…è”ç›Ÿ&page=0&size=5
```

#### æµ‹è¯•5: æ‹¼éŸ³æœç´¢
```bash
GET /api/room/search/name?roomName=jishu&page=0&size=5
```
**é¢„æœŸç»“æœ**: èƒ½å¤Ÿæœç´¢åˆ°"æŠ€æœ¯äº¤æµç¾¤"ï¼ˆå¦‚æœé…ç½®äº†æ‹¼éŸ³åˆ†æå™¨ï¼‰

### ğŸ”¥ çƒ­é—¨æˆ¿é—´æœç´¢

#### æµ‹è¯•6: æœç´¢çƒ­é—¨æˆ¿é—´
```bash
GET /api/room/search/hot?minMemberCount=100&page=0&size=10
```
**é¢„æœŸç»“æœ**: è¿”å›æˆå‘˜æ•°â‰¥100çš„æˆ¿é—´ï¼ŒæŒ‰æœç´¢è¯„åˆ†å’Œæˆå‘˜æ•°æ’åº

#### æµ‹è¯•7: æœç´¢è¶…çº§çƒ­é—¨æˆ¿é—´
```bash
GET /api/room/search/hot?minMemberCount=200&page=0&size=5
```
**é¢„æœŸç»“æœ**: è¿”å›"ç¾é£Ÿåˆ†äº«å¤©åœ°"ç­‰å¤§å‹æˆ¿é—´

### âš¡ æ´»è·ƒæˆ¿é—´æœç´¢

#### æµ‹è¯•8: æœç´¢æ´»è·ƒæˆ¿é—´
```bash
GET /api/room/search/active?page=0&size=10
```
**é¢„æœŸç»“æœ**: è¿”å›æœ€è¿‘24å°æ—¶å†…æœ‰æ´»åŠ¨çš„æˆ¿é—´

### ğŸ·ï¸ æŒ‰ç±»å‹æœç´¢

#### æµ‹è¯•9: æœç´¢å¤šäººç¾¤èŠ
```bash
GET /api/room/search/type/0?page=0&size=10
```
**é¢„æœŸç»“æœ**: è¿”å›type=0çš„ç¾¤èŠæˆ¿é—´

#### æµ‹è¯•10: æœç´¢1å¯¹1èŠå¤©
```bash
GET /api/room/search/type/1?page=0&size=10
```
**é¢„æœŸç»“æœ**: è¿”å›"æå°æ˜çš„èŠå¤©å®¤"ã€"ç‹å¤§åçš„å¯¹è¯"ç­‰ç§èŠæˆ¿é—´

### ğŸ” é«˜çº§æœç´¢

#### æµ‹è¯•11: å¤šæ¡ä»¶æœç´¢
```bash
GET /api/room/search/advanced?keyword=å¼€å‘&type=0&minMemberCount=50&page=0&size=5
```
**é¢„æœŸç»“æœ**: è¿”å›åŒ…å«"å¼€å‘"å…³é”®è¯ã€ç±»å‹ä¸ºç¾¤èŠã€æˆå‘˜æ•°â‰¥50çš„æˆ¿é—´

#### æµ‹è¯•12: æœç´¢ç¼–ç¨‹ç›¸å…³å¤§ç¾¤
```bash
GET /api/room/search/advanced?keyword=ç¼–ç¨‹&type=0&minMemberCount=100&page=0&size=10
```

### ğŸ¯ ç›¸ä¼¼æˆ¿é—´æ¨è

#### æµ‹è¯•13: åŸºäºæŠ€æœ¯ç¾¤æ¨èç›¸ä¼¼æˆ¿é—´
```bash
GET /api/room/search/1/similar?type=0&memberCount=156&searchScore=9.5&page=0&size=5
```
**é¢„æœŸç»“æœ**: æ¨èä¸"æŠ€æœ¯äº¤æµç¾¤"ç›¸ä¼¼çš„æˆ¿é—´

### ğŸ†• æ–°å»ºæˆ¿é—´æœç´¢

#### æµ‹è¯•14: æœç´¢æœ€è¿‘7å¤©çš„æ–°æˆ¿é—´
```bash
GET /api/room/search/recent?page=0&size=10
```

### ğŸ“­ ç©ºæˆ¿é—´æœç´¢

#### æµ‹è¯•15: æœç´¢å°æˆ¿é—´
```bash
GET /api/room/search/empty?maxMemberCount=30&page=0&size=10
```
**é¢„æœŸç»“æœ**: è¿”å›æˆå‘˜æ•°â‰¤30çš„æˆ¿é—´ï¼Œå¦‚"æ–°æ‰‹æ‘"ã€"Bitcoinè®¨è®ºç»„"ç­‰

### ğŸ“Š æˆå‘˜æ•°é‡èŒƒå›´æœç´¢

#### æµ‹è¯•16: æœç´¢ä¸­å‹æˆ¿é—´
```bash
GET /api/room/search/members/range?minCount=50&maxCount=150&page=0&size=10
```
**é¢„æœŸç»“æœ**: è¿”å›æˆå‘˜æ•°åœ¨50-150ä¹‹é—´çš„æˆ¿é—´

### ğŸ” æ¨¡ç³Šæœç´¢ï¼ˆå®¹é”™ï¼‰

#### æµ‹è¯•17: æ‹¼å†™é”™è¯¯å®¹é”™
```bash
GET /api/room/search/fuzzy?keyword=jisue&page=0&size=5
```
**é¢„æœŸç»“æœ**: èƒ½å®¹é”™æœç´¢åˆ°"æŠ€æœ¯"ç›¸å…³æˆ¿é—´

#### æµ‹è¯•18: è‹±æ–‡å®¹é”™
```bash
GET /api/room/search/fuzzy?keyword=pythom&page=0&size=5
```
**é¢„æœŸç»“æœ**: èƒ½æœç´¢åˆ°"Python"ç›¸å…³æˆ¿é—´

### ğŸ“ æè¿°æœç´¢

#### æµ‹è¯•19: æœç´¢ç‰¹å®šæè¿°å†…å®¹
```bash
GET /api/room/search/description?content=æœºå™¨å­¦ä¹ &page=0&size=5
```
**é¢„æœŸç»“æœ**: è¿”å›"æ·±åº¦å­¦ä¹ ç ”ç©¶å®¤"ã€"æ•°æ®ç§‘å­¦ç ”ç©¶"ç­‰ç›¸å…³æˆ¿é—´

#### æµ‹è¯•20: æœç´¢æŠ€æœ¯æ ˆ
```bash
GET /api/room/search/description?content=Spring&page=0&size=5
```

### ğŸ’¡ æœç´¢å»ºè®®

#### æµ‹è¯•21: è·å–æˆ¿é—´åç§°å»ºè®®
```bash
GET /api/room/search/suggestions?prefix=æŠ€
```
**é¢„æœŸç»“æœ**: è¿”å›ä»¥"æŠ€"å¼€å¤´çš„æˆ¿é—´åç§°å»ºè®®

#### æµ‹è¯•22: è‹±æ–‡å‰ç¼€å»ºè®®
```bash
GET /api/room/search/suggestions?prefix=Py
```

### ğŸ¤– æ™ºèƒ½æ¨è

#### æµ‹è¯•23: ä¸ªæ€§åŒ–æˆ¿é—´æ¨è
```bash
GET /api/room/search/recommend?userId=123&limit=15
```
**é¢„æœŸç»“æœ**: è¿”å›çƒ­é—¨ã€æ´»è·ƒã€æ–°å»ºæˆ¿é—´çš„æ™ºèƒ½ç»„åˆæ¨è

### ğŸ“ˆ ç»Ÿè®¡ä¿¡æ¯

#### æµ‹è¯•24: è·å–æˆ¿é—´ç»Ÿè®¡
```bash
GET /api/room/search/statistics
```
**é¢„æœŸç»“æœ**: è¿”å›æˆ¿é—´ç±»å‹åˆ†å¸ƒå’Œæˆå‘˜æ•°é‡ç»Ÿè®¡ä¿¡æ¯

### ğŸ”„ ç»„åˆæœç´¢

#### æµ‹è¯•25: å…³é”®è¯+ç±»å‹ç»„åˆæœç´¢
```bash
GET /api/room/search/combo?keyword=å­¦ä¹ &type=0&page=0&size=5
```
**é¢„æœŸç»“æœ**: è¿”å›åŒ…å«"å­¦ä¹ "å…³é”®è¯çš„ç¾¤èŠæˆ¿é—´

## æµ‹è¯•éªŒè¯è¦ç‚¹

### âœ… åŠŸèƒ½éªŒè¯
1. **æœç´¢å‡†ç¡®æ€§**: å…³é”®è¯åŒ¹é…æ˜¯å¦å‡†ç¡®
2. **æ’åºåˆç†æ€§**: ç»“æœæŒ‰è¯„åˆ†ã€æˆå‘˜æ•°ã€æ´»è·ƒåº¦åˆç†æ’åº
3. **é«˜äº®æ˜¾ç¤º**: æœç´¢ç»“æœæ˜¯å¦æ­£ç¡®é«˜äº®å…³é”®è¯
4. **åˆ†é¡µåŠŸèƒ½**: åˆ†é¡µå‚æ•°æ˜¯å¦æ­£å¸¸å·¥ä½œ
5. **è¿‡æ»¤æ¡ä»¶**: deleted=falseçš„æˆ¿é—´è¢«æ­£ç¡®è¿‡æ»¤

### âœ… æ€§èƒ½éªŒè¯
1. **å“åº”æ—¶é—´**: æœç´¢è¯·æ±‚å“åº”æ—¶é—´æ˜¯å¦åˆç†
2. **å¹¶å‘æ”¯æŒ**: å¤šç”¨æˆ·åŒæ—¶æœç´¢çš„æ€§èƒ½è¡¨ç°
3. **ç´¢å¼•æ•ˆç‡**: å¤§æ•°æ®é‡ä¸‹çš„æœç´¢æ•ˆç‡

### âœ… è¾¹ç•Œæµ‹è¯•
1. **ç©ºå…³é”®è¯æœç´¢**: å¤„ç†ç©ºå­—ç¬¦ä¸²æˆ–nullå€¼
2. **ç‰¹æ®Šå­—ç¬¦**: åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„æœç´¢
3. **è¶…é•¿å…³é”®è¯**: è¿‡é•¿æœç´¢å…³é”®è¯çš„å¤„ç†
4. **æ— ç»“æœæœç´¢**: æœç´¢ä¸å­˜åœ¨å†…å®¹çš„å¤„ç†

## å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: æœç´¢æ— ç»“æœ
```bash
# æ£€æŸ¥ç´¢å¼•æ˜¯å¦å­˜åœ¨
curl "http://localhost:9200/room_index"

# æ£€æŸ¥æ•°æ®æ˜¯å¦å¯¼å…¥
curl "http://localhost:9200/room_index/_count"

# æŸ¥çœ‹ç´¢å¼•æ˜ å°„
curl "http://localhost:9200/room_index/_mapping"
```

### é—®é¢˜2: æ‹¼éŸ³æœç´¢ä¸ç”Ÿæ•ˆ
- ç¡®è®¤Elasticsearchå·²å®‰è£…æ‹¼éŸ³åˆ†æå™¨æ’ä»¶
- æ£€æŸ¥ç´¢å¼•æ˜ å°„ä¸­çš„æ‹¼éŸ³å­—æ®µé…ç½®

### é—®é¢˜3: é«˜äº®ä¸æ˜¾ç¤º
- ç¡®è®¤æŸ¥è¯¢ä½¿ç”¨äº†@Highlightæ³¨è§£
- æ£€æŸ¥å‰ç«¯æ˜¯å¦æ­£ç¡®è§£æhighlightå­—æ®µ

### é—®é¢˜4: æ’åºä¸åˆç†
- æ£€æŸ¥searchScoreå­—æ®µçš„å€¼æ˜¯å¦åˆç†
- ç¡®è®¤æ’åºå­—æ®µçš„æ˜ å°„ç±»å‹æ­£ç¡®

## æ‰©å±•æµ‹è¯•

### å‹åŠ›æµ‹è¯•
```bash
# ä½¿ç”¨Apache Benchè¿›è¡Œå‹åŠ›æµ‹è¯•
ab -n 1000 -c 10 "http://localhost:8080/api/room/search/intelligent?keyword=æŠ€æœ¯"
```

### æœç´¢åˆ†æ
```bash
# æŸ¥çœ‹æœç´¢æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’
curl -X GET "http://localhost:9200/room_index/_search?explain=true" \
  -H "Content-Type: application/json" \
  -d '{"query": {"match": {"roomName": "æŠ€æœ¯"}}}'
```

---

**å»ºè®®**: åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæ ¹æ®ç”¨æˆ·æœç´¢è¡Œä¸ºå’Œä¸šåŠ¡éœ€æ±‚ï¼ŒæŒç»­ä¼˜åŒ–æœç´¢ç®—æ³•å’Œæƒé‡é…ç½®ã€‚